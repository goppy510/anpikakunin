# DMData 地震監視・Slack通知タスク

## 背景
- 現状の地震モニタリング機能は WebSocket 前提で作り込まれており、DMData REST API を利用した取得ができていない。
- Slack 通知処理はリアルタイムモニタリングと密結合しており、REST API を介した安定した通知設計に移行したい。
- DMData API 呼び出しが正常に動作していない疑いがあるため、原因特定と修正が必要。

## タスク一覧
- [ ] DMData REST API の認証フローとリクエスト実装を点検し、API 呼び出し失敗の原因を特定・修正する。
- [ ] 地震リアルタイムモニタリング（WebSocket）ロジックと Slack 通知ロジックを分離し、REST ベース通知パイプラインを設計する。
- [ ] 管理画面の地震データ取得処理を Socket 依存から REST API 呼び出しへ置き換える。
- [ ] Slack 通知ワークフローを DMData REST API で取得したデータに基づく実装へリファクタリングし、テストパスを確認する。
- [ ] DMData API / Slack 通知まわりの設定値（環境変数や設定ファイル）の整理とドキュメント化を行う。
- [ ] 地震イベントログを Supabase/PostgreSQL に保存し、重複通知抑止ロジックとの連携を確認する。
- [ ] Prisma を利用した Slack ワークスペース／通知設定テーブル運用を整備し、Bot Token 暗号化保存を確認する。

## メモ
- 実装着手前に DMData API 用のスコープ・トークン管理の現状を再確認する。
- 既存の WebSocket モジュールは引き続きシミュレーション用途で利用できるようにする。
